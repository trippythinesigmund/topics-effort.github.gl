<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Minecraft Server Status Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 50px;
      transition: background-color 0.3s;
    }
    h1 {
      margin-bottom: 0;
    }
    h4 {
      margin-top: 5px;
      color: rgba(0,0,0,0.48);
      font-weight: normal;
    }
    #status {
      font-size: 24px;
      margin-top: 30px;
    }
    #players-count {
      font-size: 20px;
      margin-top: 10px;
    }
    #updated {
      margin-top: 15px;
      font-size: 14px;
      color: rgba(0,0,0,0.5);
    }
    ul {
      list-style: none;
      padding: 0;
    }
  </style>
</head>
<body>

<h1>Minecraft Server Status Checker</h1>
<h4>(for pul's server)</h4>

<p id="status">Checking server...</p>
<p id="players-count"></p>
<ul id="players-list"></ul>
<p id="updated"></p>

<script>
const serverIP = "topics-effort.gl.joinmc.link"; // change this
const REFRESH_TIME = 60000; // 1 minute

function updateTime() {
  const now = new Date();
  document.getElementById("updated").textContent =
    "Last updated: " + now.toLocaleTimeString();
}

function checkServer() {
  fetch(`https://api.mcstatus.io/v2/status/java/${serverIP}`)
    .then(res => res.json())
    .then(data => {
      const status = document.getElementById("status");
      const count = document.getElementById("players-count");
      const list = document.getElementById("players-list");

      if (data.online) {
        document.body.style.backgroundColor = "#d4f8d4";
        status.textContent = "ðŸŸ¢ Server is ONLINE";
        count.textContent =
          `Players: ${data.players.online} / ${data.players.max}`;

        list.innerHTML = "";
        if (data.players.list && data.players.list.length > 0) {
          data.players.list.forEach(p => {
            const li = document.createElement("li");
            li.textContent = p.name;
            list.appendChild(li);
          });
        } else {
          list.innerHTML = "<li>No players online</li>";
        }
      } else {
        throw new Error("offline");
      }

      updateTime();
    })
    .catch(() => {
      document.body.style.backgroundColor = "#f8d4d4";
      document.getElementById("status").textContent = "ðŸ”´ Server is OFFLINE";
      document.getElementById("players-count").textContent = "";
      document.getElementById("players-list").innerHTML = "";
      updateTime();
    });
}

checkServer();                      // first load
setInterval(checkServer, REFRESH_TIME); // auto refresh
</script>

</body>
</html>
